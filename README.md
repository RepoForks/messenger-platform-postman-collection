# Postman Collection for Messenger Platform &nbsp;&nbsp;&nbsp; [![Run in Postman](https://run.pstmn.io/button.svg)](https://app.getpostman.com/run-collection/a760368515fa96cedcb6#?env%5BMessenger%20Platform%20Environment%20Variables%5D=W3siZW5hYmxlZCI6dHJ1ZSwia2V5IjoiU0VUX0VOViIsInZhbHVlIjoiVFJVRSIsInR5cGUiOiJ0ZXh0In0seyJlbmFibGVkIjp0cnVlLCJrZXkiOiJQQUdFX1RPS0VOIiwidmFsdWUiOiJZT1VSIFBBR0UgQUNDRVNTIFRPS0VOIiwidHlwZSI6InRleHQifSx7ImVuYWJsZWQiOnRydWUsImtleSI6IlBTSUQiLCJ2YWx1ZSI6IllPVVIgUEFHRS1TQ09QRUQgVVNFUiBJRCIsInR5cGUiOiJ0ZXh0In0seyJlbmFibGVkIjp0cnVlLCJrZXkiOiJJTUFHRV9BVFRBQ0hNRU5UX0lEIiwidmFsdWUiOiJTRU5EIEFQSSAtIEFOIEFUVEFDSE1FTlRfSUQgT0YgQU4gSU1BR0UiLCJ0eXBlIjoidGV4dCJ9LHsiZW5hYmxlZCI6dHJ1ZSwia2V5IjoiVklERU9fQVRUQUNITUVOVF9JRCIsInZhbHVlIjoiU0VORCBBUEkgLSBBTiBBVFRBQ0hNRU5UX0lEIE9GIEEgVklERU8iLCJ0eXBlIjoidGV4dCJ9LHsiZW5hYmxlZCI6dHJ1ZSwia2V5IjoiQVBQX0lEX1BSSU1BUlkiLCJ2YWx1ZSI6IkhBTkRPVkVSIFBST1RPQ09MIC0gUFJJTUFSWSBSRUNFSVZFUiBBUFAgSUQiLCJ0eXBlIjoidGV4dCJ9LHsiZW5hYmxlZCI6dHJ1ZSwia2V5IjoiQVBQX0lEX1NFQ09OREFSWSIsInZhbHVlIjoiSEFORE9WRVIgUFJPVE9DT0wgLSBTRUNPTkRBUlkgUkVDRUlWRVIgQVBQIElEIiwidHlwZSI6InRleHQifSx7ImVuYWJsZWQiOnRydWUsImtleSI6Ik1FU1NBR0VfQ1JFQVRJVkVfSURfQUxMIiwidmFsdWUiOiJCUk9EQ0FTVCAtIEEgTUVTU0FHRSBDUkVBVElWRSBJRCBUTyBTRU5EIFRPIEFMTCBDT05WRVJTQVRJT05TIiwidHlwZSI6InRleHQifSx7ImVuYWJsZWQiOnRydWUsImtleSI6Ik1FU1NBR0VfQ1JFQVRJVkVfSURfVEFSR0VURUQiLCJ2YWx1ZSI6IkJST0RDQVNUIC0gQSBNRVNTQUdFIENSRUFUSVZFIElEIFRPIFNFTkQgVE8gQSBDVVNUT00gTEFCRUwiLCJ0eXBlIjoidGV4dCJ9LHsiZW5hYmxlZCI6dHJ1ZSwia2V5IjoiQ1VTVE9NX0xBQkVMX0lEIiwidmFsdWUiOiJCUk9BRENBU1QgLSBBIENVU1RPTSBMQUJFTCBJRCBUTyBUQVJHRVQiLCJ0eXBlIjoidGV4dCJ9LHsiZW5hYmxlZCI6dHJ1ZSwia2V5IjoiUkVBQ0hfRVNUSU1BVElPTl9JRCIsInZhbHVlIjoiQlJPQURDQVNUIC0gQSBSRUFDSCBFU1RJTUFUSU9OIElEIiwidHlwZSI6InRleHQifSx7ImVuYWJsZWQiOnRydWUsImtleSI6IkFTSUQiLCJ2YWx1ZSI6IklEIE1BVENISU5HIC0gQVBQLVNDT1BFRCBVU0VSIElEIiwidHlwZSI6InRleHQifSx7ImVuYWJsZWQiOnRydWUsImtleSI6IkFQUF9JRCIsInZhbHVlIjoiSUQgTUFUQ0hJTkcgLSBBUFAgSUQiLCJ0eXBlIjoidGV4dCJ9LHsiZW5hYmxlZCI6dHJ1ZSwia2V5IjoiQVBQX1NFQ1JFVCIsInZhbHVlIjoiSUQgTUFUQ0hJTkcgLSBBUFAgU0VDUkVUIiwidHlwZSI6InRleHQifSx7ImVuYWJsZWQiOnRydWUsImtleSI6IkFQUF9TRUNSRVRfUFJPT0YiLCJ2YWx1ZSI6IklEIE1BVENISU5HIC0gQVBQIFNFQ1JFVCBQUk9PRiIsInR5cGUiOiJ0ZXh0In0seyJlbmFibGVkIjp0cnVlLCJrZXkiOiJXSVRfVE9LRU4iLCJ2YWx1ZSI6IkJVSUxULUlOIE5MUCAtIFdJVCBTRVJWRVIgQUNDRVNTIFRPS0VOIiwidHlwZSI6InRleHQifV0=)

This is a [Postman](https://getpostman.com) collection that covers pretty much every API request available for the Messenger Platform. This collection should be useful for getting started working with your bot to try out features and send all the different message types. You can also use it once you are in production to send messages!

## Environment Variables

This collection makes liberal use of [Postman environment variables](https://www.getpostman.com/docs/postman/environments_and_globals/manage_environments) to automate API requests to the greatest extent possible. Basically, anytime you see `{{SOME_VAR_NAME}}` in a request body or URI that's a Postman env var. 

When you load this collection into Postman, it will also load a 'Messenger Platform Environment Variables' environment that includes all the possible env vars used by this collection.

### Required Environment Variables

**At a minimum** you should set these environment variables, since they are needed for almost all Messenger Platform API requests, especially message sends.

| **Env Var** | **Type** | **Description** | **What's it For?** |
| ----------- | -------- | --------------- | ------------------ |
| `PSID` | String | A page-scoped ID | Specifies the user to target. This will be used as the default user for all requests. To get this, send a message to your bots and extract the `id` property from the `messages` webhook event. |
| `PAGE_TOKEN` | String | Your Page access token  | Almost all API requests. Available in the 'Token Generation' section of your app's Messenger settings. |
| `SET_ENV`| Boolean | Sets whether other env vars will be automatically set from API responses when you use Postman's collection runner. | This is a convenience so that you don't have to manually set a bunch of IDs for all the different API requests. |

### Optional Environment Variables

Many of the optional vars will be set for you if you set the `SET_ENV` env var to `TRUE` and run Postman's collection runner. You can also set these manually in each call if you want.

#### Reusable Assets

| **Env Var** | **Type** | **Description** | **What's it For?** |
| ----------- | -------- | --------------- | ------------------ |
| `IMAGE_ATTACHMENT_ID` | String | An `attachment_id` of an uploaded image | The `attachment_id` to use for message sends with an image. |
| `VIDEO_ATTACHMENT_ID` | String | An `attachment_id` of an uploaded video | The `attachment_id` to use for message sends with a video. |

#### Handover Protocol

| **Env Var** | **Type** | **Description** | **What's it For?** |
| ----------- | -------- | --------------- | ------------------ |
| `APP_ID_PRIMARY` | String | An app ID | The app ID for the Facebook app you want to use as the Primary Receiver for your bot. |
| `APP_ID_SECONDARY` | String | An app ID | The app ID for the Facebook app you want to use as the Secondary Primary Receiver for your bot. |

#### Broadcast API

| **Env Var** | **Type** | **Description** | **What's it For?** |
| ----------- | -------- | --------------- | ------------------ |
| `MESSAGE_CREATIVE_ID_ALL` | String | A `message_creative_id` | The `message_creative_id` of a message creative to broadcast to all open conversations. |
| `MESSAGE_CREATIVE_ID_TARGETED` | String | A `message_creative_id` | The `message_creative_id` of a message creative to broadcast to open conversations associated with a custom label. |
| `REACH_ESTIMATION_ID` | String | A `reach_estimation_id` | The `reach_estimation_id` to start a reach estimation for. |
| `CUSTOM_LABEL_ID` | String | A `custom_label_id` | The `custom_label_id` to associate with PSIDs or to target a broadcast to.  |

#### ID Matching

| **Env Var** | **Type** | **Description** | **What's it For?** |
| ----------- | -------- | --------------- | ------------------ |
| `ASID`  | String | A user's app-scoped ID | The app-scoped ID to match with the ID Matching API. |
| `APP_TOKEN` | String | An app token | The app token to use with the ID Matching API. |
| `APP_SECRET` | String | An app secret | The app secret to use with the ID Matching API. |
| `APP_SECRET_PROOF` | String | An app secret proof | The [app secret proof](https://developers.facebook.com/docs/graph-api/securing-requests#appsecret_proof) to use with the ID Matching API. |

#### Built-in NLP

| **Env Var** | **Type** | **Description** | **What's it For?** |
| ----------- | -------- | --------------- | ------------------ |
| `WIT_TOKEN` | String | A Wit.ai server access token | Connects your Messenger bot to a Wit.ai custom model. Available in the settings for your [Wit.ai](https://wit.ai/) app. |

## Useful Resources

#### Messenger Platform

- [Messenger Platform Docs](developers.facebook.com/docs/messenger-platform)
- [Messenger Platform Quick Start Tutorial](developers.facebook.com/docs/messenger-platform/getting-started/quick-start)
- [Messenger Platform Getting Started](developers.facebook.com/docs/messenger-platform/getting-started/)
- [Messenger Platform Introduction](developers.facebook.com/docs/messenger-platform/introduction)

#### Postman

- [Download Postman](https://www.getpostman.com/postman)
- [Postman Collection Docs](https://www.getpostman.com/docs/postman/collections/managing_collections)
- [Postman Environment Docs](https://www.getpostman.com/docs/postman/environments_and_globals/manage_environments)
- [Postman Scripting Docs](https://www.getpostman.com/docs/postman/scripts/intro_to_scripts)
- [Postman Scripting API Reference](https://www.getpostman.com/docs/postman/scripts/postman_sandbox_api_reference)
